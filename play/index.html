<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Player Games</title>
    <meta name="google-adsense-account" content="ca-pub-8391255860930347">
    <!-- Plyr CSS -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <style>
       body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .movie-posters {
            display: flex;
            justify-content: center;
        }

        .movie-posters img {
            width: 320px;
            height: 200px;
            /* loading="lazy" */
        }

        .buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .buttons a {
            display: block;
            width: 200px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            text-decoration: none;
            color: #333;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-size: 16px;
        }
        .ads-container {
            width: 100%;
            text-align: center;
            margin-bottom: 20px;
        }
        /* Optimasi Tata Letak Iklan */
        .ads-container-top {
          margin-top: 10px;
        }

        .ads-container-bottom {
          margin-bottom: 10px;
        }

        .video-ad-container {
            position: relative;
            width: 100%;
        }
        /* Plyr Overrides */
        .plyr--video.plyr--paused .plyr__controls {
            display: flex !important;
        }
        .video-ad-container .ads-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }

    </style>

    <script>
        function getUrlVars() {
            var vars = {};
            window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
                vars[key] = value;
            });
            return vars;
        }

        function getUrlParam(parameter, defaultvalue) {
            return window.location.href.indexOf(parameter) > -1 ? getUrlVars()[parameter] : defaultvalue;
        }
        var film = getUrlParam('film', null);
        var encryptfilm = decodeURIComponent(film);
    </script>
</head>
<body>
    <div class="ads-container ads-container-top">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8391255860930347"
                crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
            style="display:inline-block;width:728px;height:90px"
            data-ad-client="ca-pub-8391255860930347"
            data-ad-slot="6458585847"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="video-ad-container">
        <div class="movie-posters">
            <video id="player" width="100%">
                <source id="video-source" src="" type="video/mp4">
            </video>
        </div>

        <div class="ads-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; display: flex; justify-content: center; align-items: center; pointer-events: none;">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8391255860930347"
                crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-8391255860930347"
                data-ad-slot="YOUR_VIDEO_OVERLAY_AD_SLOT"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <div class="buttons">
        <a href="https://t.me/group_lk21">Join Group Telegram</a>
    </div>

    <div class="ads-container ads-container-bottom">
         <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8391255860930347"
                crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
            style="display:inline-block;width:728px;height:90px"
            data-ad-client="ca-pub-8391255860930347"
            data-ad-slot="2845977612"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>

    <script>
      //Other functions
      async function getVisitorIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error("Error getting IP:", error);
                return null;
            }
        }

        function createFingerprint() {
            const fingerprint = 'fingerprint-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('visitor_fingerprint', fingerprint);
            return fingerprint;
        }


        function loadAdsense() {
            if (typeof adsbygoogle !== 'undefined') {
                (adsbygoogle = window.adsbygoogle || []).push({});
            } else {
                console.warn("AdSense library not loaded yet.");
            }
        }

        function lazyLoadImages() {
            var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

            if ("IntersectionObserver" in window) {
                let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            let lazyImage = entry.target;
                            lazyImage.src = lazyImage.dataset.src;
                            // lazyImage.srcset = lazyImage.dataset.srcset;
                            lazyImage.classList.remove("lazy");
                            lazyImageObserver.unobserve(lazyImage);
                        }
                    });
                });

                lazyImages.forEach(function(lazyImage) {
                    lazyImageObserver.observe(lazyImage);
                });
            } else {
                // Fallback
                lazyImages.forEach(function(lazyImage){
                    lazyImage.src = lazyImage.dataset.src;
                    lazyImage.classList.remove("lazy");
                });
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            initAntiFraud();
            lazyLoadImages();

            const player = new Plyr('#player', {
                controls: [
                    'play-large', 'restart', 'rewind', 'play', 'fast-forward',
                    'progress', 'current-time', 'duration', 'mute', 'volume',
                    'captions', 'settings', 'pip', 'airplay', 'fullscreen' // 'download' removed
                ],
            });

            const videoSource = document.getElementById('video-source');
            if (film !== null) {
                console.log("encryptfilm value:", encryptfilm);
                 player.source = {
                   type: 'video',
                   sources: [{
                     src: encryptfilm,
                     type: 'video/mp4',
                   }],
                 };
            }

            setTimeout(loadAdsense, 500);
        });

        async function initAntiFraud() {
            const referrer = document.referrer;
            const visitorIP = await getVisitorIP();
            const storedIP = localStorage.getItem('stored_ip');
            const fingerprint = localStorage.getItem('visitor_fingerprint') || createFingerprint();

            if (referrer.includes('google.com')) {
                console.log('Pengunjung berasal dari Google Search.');
            } else {
                console.log('Pengunjung bukan dari Google Search.');
            }

            if (storedIP && storedIP === visitorIP) {
                console.log('IP sudah terdaftar, potential fraud.');
            } else {
                localStorage.setItem('stored_ip', visitorIP);
                console.log('IP baru terdeteksi:', visitorIP);
            }
            console.log('Fingerprint pengunjung:', fingerprint);
        }

    </script>
</body>
</html>